name: Deploy to My Laptop

on:
  workflow_dispatch:  # Manual trigger only

jobs:
  deploy:
    runs-on: self-hosted  # ← Runs on YOUR laptop
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Build and run locally
        run: |
          cd Docker-ecomSite-image
          docker build -t ecom-local .
          docker stop myapp 2>/dev/null || true
          docker rm myapp 2>/dev/null || true
          docker run -d --name myapp -p 8080:80 ecom-local
          echo "✅ Running on http://localhost:8080"
